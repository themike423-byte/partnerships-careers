<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Partnerships Careers - Find Your Next Partnership Role</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div id="root"></div>
    
    <!-- Load React first -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Firebase as ES Module -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore, doc, setDoc, getDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        console.log('Starting Firebase initialization...');

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCkWWc1eVRQ9-7PkPCI2DpCdUvojP4a1B4",
            authDomain: "partnerships-careers.firebaseapp.com",
            projectId: "partnerships-careers",
            storageBucket: "partnerships-careers.firebasestorage.app",
            messagingSenderId: "1056227088220",
            appId: "1:1056227088220:web:e21d57b944758087c79399"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const googleProvider = new GoogleAuthProvider();

        console.log('Firebase initialized successfully!');

        // Make Firebase available globally
        window.firebaseAuth = auth;
        window.firebaseDb = db;
        window.googleProvider = googleProvider;
        window.firebaseAuthFunctions = {
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword,
            signInWithPopup,
            onAuthStateChanged,
            signOut,
            GoogleAuthProvider
        };
        window.firestoreFunctions = {
            doc,
            setDoc,
            getDoc
        };

        // Signal that Firebase is ready
        window.firebaseReady = true;
        console.log('Firebase globals set, dispatching ready event');
        window.dispatchEvent(new Event('firebaseReady'));
    </script>
    
    <!-- Main App Script -->
    <script>
        console.log('Main script starting...');
        
        // Wait for Firebase to be ready before starting the app
        function initApp() {
            console.log('Checking if Firebase is ready...');
            if (!window.firebaseReady) {
                console.log('Firebase not ready yet, waiting...');
                window.addEventListener('firebaseReady', initApp, { once: true });
                return;
            }
            
            console.log('Firebase is ready! Starting React app...');
            
            const { useState, useEffect, useMemo } = React;
            const { createRoot } = ReactDOM;
            
            const SHEETY_API = 'https://api.sheety.co/4ce55d1d0ad684ea192b042bd2f3b53d/partnershipsCareersDb/sheet1';
            const LEVELS = ['Manager', 'Director', 'VP', 'Chief'];
            const CATEGORIES = [
              'Ecosystem & Platform',
              'Channel & Reseller',
              'Strategic Alliances with Hyperscalers/SIs',
              'Product & OEM Partnerships',
              'Corporate Development & Venture Partnerships'
            ];

            // Utility Functions
            const trackJobView = async (jobId) => {
                try {
                    await fetch('/api/track-view', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ jobId: jobId })
                    });
                } catch (error) {
                    console.error('Error tracking view:', error);
                }
            };

            const trackJobClick = async (jobId, jobUrl) => {
                try {
                    await fetch('/api/track-click', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ jobId: jobId })
                    });
                    setTimeout(() => {
                        window.open(jobUrl, '_blank');
                    }, 100);
                } catch (error) {
                    console.error('Error tracking click:', error);
                    window.open(jobUrl, '_blank');
                }
            };

            const calculateDaysRemaining = (expiryDateString) => {
                if (!expiryDateString) return null;
                try {
                    const expiry = new Date(expiryDateString);
                    const today = new Date();
                    const diffTime = expiry - today;
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    return diffDays > 0 ? diffDays : 0;
                } catch (error) {
                    return null;
                }
            };

            const calculateCTR = (clicks, views) => {
                if (!views || views === 0) return '0.0';
                return ((clicks / views) * 100).toFixed(1);
            };

            function App() {
                const [jobs, setJobs] = useState([]);
                const [selectedLevel, setSelectedLevel] = useState('All');
                const [selectedCategory, setSelectedCategory] = useState('All');
                const [loading, setLoading] = useState(false);
                const [error, setError] = useState(null);
                const [showEmployerLogin, setShowEmployerLogin] = useState(false);
                const [showDashboard, setShowDashboard] = useState(false);
                const [isSignUp, setIsSignUp] = useState(false);
                const [email, setEmail] = useState('');
                const [isEmployerLoggedIn, setIsEmployerLoggedIn] = useState(false);
                const [employerCompany, setEmployerCompany] = useState('');
                const [employerFirstName, setEmployerFirstName] = useState('');
                const [currentUser, setCurrentUser] = useState(null);
                const [authLoading, setAuthLoading] = useState(true);
                const [showJobForm, setShowJobForm] = useState(false);
                const [newJobData, setNewJobData] = useState({
                    title: '',
                    location: '',
                    type: 'Full-Time',
                    level: 'Manager',
                    category: 'Ecosystem & Platform',
                    description: '',
                    link: ''
                });

                useEffect(() => {
                    fetchJobs();
                    
                    // Check for payment success/cancel in URL
                    const urlParams = new URLSearchParams(window.location.search);
                    const paymentStatus = urlParams.get('payment');
                    const paymentType = urlParams.get('type');
                    
                    if (paymentStatus === 'success') {
                        if (paymentType === 'new') {
                            setShowJobForm(true);
                            setShowDashboard(true);
                            alert('üéâ Payment successful! Please fill out the form below to post your featured job.');
                        } else {
                            alert('üéâ Payment successful! Your job listing is now featured for 30 days.');
                            setShowDashboard(true);
                        }
                        window.history.replaceState({}, document.title, window.location.pathname);
                    } else if (paymentStatus === 'cancelled') {
                        alert('Payment was cancelled.');
                        window.history.replaceState({}, document.title, window.location.pathname);
                    }
                    
                    // Set up auth state listener
                    const { onAuthStateChanged } = window.firebaseAuthFunctions;
                    const { doc, getDoc } = window.firestoreFunctions;
                    
                    const unsubscribe = onAuthStateChanged(window.firebaseAuth, async (user) => {
                        if (user) {
                            setCurrentUser(user);
                            try {
                                const userDoc = await getDoc(doc(window.firebaseDb, 'employers', user.uid));
                                if (userDoc.exists()) {
                                    const userData = userDoc.data();
                                    setEmployerFirstName(userData.firstName || 'there');
                                    setEmployerCompany(userData.company || 'Your Company');
                                    setIsEmployerLoggedIn(true);
                                }
                            } catch (err) {
                                console.error('Error fetching user data:', err);
                            }
                        } else {
                            setCurrentUser(null);
                            setIsEmployerLoggedIn(false);
                        }
                        setAuthLoading(false);
                    });
                    
                    return () => unsubscribe();
                }, []);

                const fetchJobs = async () => {
                    setLoading(true);
                    setError(null);
                    try {
                        const response = await fetch(SHEETY_API);
                        if (!response.ok) throw new Error('Failed to fetch');
                        const data = await response.json();
                        const jobsArray = data.sheet1 || [];
                        setJobs(jobsArray.map(job => ({
                            ...job,
                            isFeatured: job.isFeatured === true,
                            totalViews: job.totalViews || 0,
                            totalClicks: job.totalClicks || 0
                        })));
                    } catch (err) {
                        setError('Error loading jobs');
                    } finally {
                        setLoading(false);
                    }
                };

                const filteredJobs = useMemo(() => {
                    return jobs.filter(job => {
                        const matchesLevel = selectedLevel === 'All' || job.level === selectedLevel;
                        const matchesCategory = selectedCategory === 'All' || job.category === selectedCategory;
                        return matchesLevel && matchesCategory;
                    });
                }, [jobs, selectedLevel, selectedCategory]);

                const featuredJobs = filteredJobs.filter(job => job.isFeatured);
                const regularJobs = filteredJobs.filter(job => !job.isFeatured);

                const handleSignUp = async (email, password, firstName, company) => {
                    try {
                        const { createUserWithEmailAndPassword } = window.firebaseAuthFunctions;
                        const { doc, setDoc } = window.firestoreFunctions;
                        
                        const userCredential = await createUserWithEmailAndPassword(window.firebaseAuth, email, password);
                        const user = userCredential.user;
                        
                        await setDoc(doc(window.firebaseDb, 'employers', user.uid), {
                            email: email,
                            firstName: firstName,
                            company: company,
                            createdAt: new Date().toISOString()
                        });
                        
                        setEmployerFirstName(firstName);
                        setEmployerCompany(company);
                        setIsEmployerLoggedIn(true);
                        setShowEmployerLogin(false);
                        setShowDashboard(false);
                        alert('Account created successfully!');
                    } catch (error) {
                        console.error('Sign up error:', error);
                        alert('Error creating account: ' + error.message);
                    }
                };

                const handleLogin = async (email, password) => {
                    try {
                        const { signInWithEmailAndPassword } = window.firebaseAuthFunctions;
                        const { doc, getDoc } = window.firestoreFunctions;
                        
                        const userCredential = await signInWithEmailAndPassword(window.firebaseAuth, email, password);
                        const user = userCredential.user;
                        
                        const userDoc = await getDoc(doc(window.firebaseDb, 'employers', user.uid));
                        if (userDoc.exists()) {
                            const userData = userDoc.data();
                            setEmployerFirstName(userData.firstName || 'there');
                            setEmployerCompany(userData.company || 'Your Company');
                        }
                        
                        setIsEmployerLoggedIn(true);
                        setShowEmployerLogin(false);
                        setShowDashboard(false);
                        alert('Logged in successfully!');
                    } catch (error) {
                        console.error('Login error:', error);
                        alert('Error logging in: ' + error.message);
                    }
                };

                const handleGoogleSignIn = async () => {
                    try {
                        const { signInWithPopup } = window.firebaseAuthFunctions;
                        const { doc, setDoc, getDoc } = window.firestoreFunctions;
                        
                        const result = await signInWithPopup(window.firebaseAuth, window.googleProvider);
                        const user = result.user;
                        
                        const userDoc = await getDoc(doc(window.firebaseDb, 'employers', user.uid));
                        
                        if (!userDoc.exists()) {
                            const company = prompt('Please enter your company name:');
                            if (!company) {
                                alert('Company name is required');
                                await window.firebaseAuthFunctions.signOut(window.firebaseAuth);
                                return;
                            }
                            
                            const firstName = user.displayName ? user.displayName.split(' ')[0] : 'there';
                            
                            await setDoc(doc(window.firebaseDb, 'employers', user.uid), {
                                email: user.email,
                                firstName: firstName,
                                company: company,
                                createdAt: new Date().toISOString()
                            });
                            
                            setEmployerFirstName(firstName);
                            setEmployerCompany(company);
                        } else {
                            const userData = userDoc.data();
                            setEmployerFirstName(userData.firstName || 'there');
                            setEmployerCompany(userData.company || 'Your Company');
                        }
                        
                        setIsEmployerLoggedIn(true);
                        setShowEmployerLogin(false);
                        setShowDashboard(false);
                    } catch (error) {
                        console.error('Google sign in error:', error);
                        alert('Error signing in with Google: ' + error.message);
                    }
                };

                const handleLogout = async () => {
                    try {
                        const { signOut } = window.firebaseAuthFunctions;
                        await signOut(window.firebaseAuth);
                        setIsEmployerLoggedIn(false);
                        setEmployerCompany('');
                        setEmployerFirstName('');
                        setCurrentUser(null);
                        setShowJobForm(false);
                        alert('Logged out successfully');
                    } catch (error) {
                        console.error('Logout error:', error);
                        alert('Error logging out: ' + error.message);
                    }
                };

                const handlePromoteJob = async (job) => {
                    try {
                        const response = await fetch('/api/create-checkout', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                type: 'promote',
                                jobId: job.id || job.title.replace(/\s+/g, '-').toLowerCase(),
                                jobTitle: job.title,
                                employerId: currentUser?.uid || 'unknown',
                            }),
                        });

                        if (!response.ok) throw new Error('Failed to create checkout session');
                        const { url } = await response.json();
                        window.location.href = url;
                    } catch (error) {
                        console.error('Payment error:', error);
                        alert('Error starting payment: ' + error.message);
                    }
                };

                const handlePostNewJob = async () => {
                    try {
                        const response = await fetch('/api/create-checkout', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                type: 'new',
                                employerId: currentUser?.uid || 'unknown',
                                company: employerCompany,
                            }),
                        });

                        if (!response.ok) throw new Error('Failed to create checkout session');
                        const { url } = await response.json();
                        window.location.href = url;
                    } catch (error) {
                        console.error('Payment error:', error);
                        alert('Error starting payment: ' + error.message);
                    }
                };

                const handleSubmitNewJob = async (e) => {
                    e.preventDefault();
                    
                    if (!newJobData.title || !newJobData.location || !newJobData.description || !newJobData.link) {
                        alert('Please fill out all required fields');
                        return;
                    }

                    try {
                        // Calculate featured expiry date (30 days from now)
                        const expiryDate = new Date();
                        expiryDate.setDate(expiryDate.getDate() + 30);
                        const formattedExpiry = `${expiryDate.getMonth() + 1}/${expiryDate.getDate()}/${expiryDate.getFullYear()}`;
                        
                        const jobToSubmit = {
                            sheet1: {
                                title: newJobData.title,
                                company: employerCompany,
                                location: newJobData.location,
                                type: newJobData.type,
                                salaryRange: 'Unspecified',
                                level: newJobData.level,
                                category: newJobData.category,
                                description: newJobData.description,
                                postedDate: new Date().toLocaleDateString('en-US'),
                                isFeatured: true,
                                employerId: currentUser?.uid || 'unknown',
                                link: newJobData.link,
                                featuredExpiryDate: formattedExpiry,
                                totalViews: 0,
                                totalClicks: 0,
                                status: 'active'
                            }
                        };

                        const response = await fetch(SHEETY_API, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(jobToSubmit),
                        });

                        if (!response.ok) throw new Error('Failed to post job');

                        alert('üéâ Your featured job has been posted successfully!');
                        
                        setShowJobForm(false);
                        setNewJobData({
                            title: '',
                            location: '',
                            type: 'Full-Time',
                            level: 'Manager',
                            category: 'Ecosystem & Platform',
                            description: '',
                            link: ''
                        });
                        fetchJobs();
                    } catch (error) {
                        console.error('Error posting job:', error);
                        alert('Error posting job: ' + error.message);
                    }
                };

                // Track views when jobs are displayed
                useEffect(() => {
                    featuredJobs.forEach(job => {
                        if (job.id) trackJobView(job.id);
                    });
                    regularJobs.forEach(job => {
                        if (job.id) trackJobView(job.id);
                    });
                }, [featuredJobs, regularJobs]);

                // ENHANCED EMPLOYER DASHBOARD
                if (isEmployerLoggedIn && showDashboard) {
                    const employerJobs = jobs.filter(job => job.company === employerCompany);
                    
                    // Calculate aggregate stats
                    const totalViews = employerJobs.reduce((sum, job) => sum + (job.totalViews || 0), 0);
                    const totalClicks = employerJobs.reduce((sum, job) => sum + (job.totalClicks || 0), 0);
                    const avgCTR = totalViews > 0 ? ((totalClicks / totalViews) * 100).toFixed(1) : '0.0';
                    
                    // If showing job form after payment
                    if (showJobForm) {
                        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100' },
                            React.createElement('header', { className: 'bg-white shadow-sm border-b' },
                                React.createElement('div', { className: 'max-w-7xl mx-auto px-4 py-4 flex justify-between items-center' },
                                    React.createElement('h1', { className: 'text-xl font-bold' }, 'üëî Post Featured Job'),
                                    React.createElement('button', { 
                                        onClick: () => setShowJobForm(false),
                                        className: 'text-gray-600 hover:text-gray-900'
                                    }, '‚Üê Back to Dashboard')
                                )
                            ),
                            React.createElement('div', { className: 'max-w-3xl mx-auto px-4 py-8' },
                                React.createElement('div', { className: 'bg-white rounded-lg shadow p-6 mb-4' },
                                    React.createElement('h2', { className: 'text-2xl font-bold mb-2' }, 'Post Your Featured Job'),
                                    React.createElement('p', { className: 'text-gray-600' }, 'Fill out the details below. Your job will be featured at the top of the job board for 30 days.')
                                ),
                                React.createElement('form', { 
                                    onSubmit: handleSubmitNewJob,
                                    className: 'bg-white rounded-lg shadow p-6 space-y-6'
                                },
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Job Title *'),
                                        React.createElement('input', { 
                                            type: 'text',
                                            value: newJobData.title,
                                            onChange: (e) => setNewJobData({...newJobData, title: e.target.value}),
                                            className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500',
                                            placeholder: 'e.g., Director of Channel Partnerships',
                                            required: true
                                        })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Company'),
                                        React.createElement('input', { 
                                            type: 'text',
                                            value: employerCompany,
                                            disabled: true,
                                            className: 'w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50',
                                        })
                                    ),
                                    React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
                                        React.createElement('div', null,
                                            React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Level *'),
                                            React.createElement('select', { 
                                                value: newJobData.level,
                                                onChange: (e) => setNewJobData({...newJobData, level: e.target.value}),
                                                className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500',
                                                required: true
                                            },
                                                LEVELS.map(level => React.createElement('option', { key: level, value: level }, level))
                                            )
                                        ),
                                        React.createElement('div', null,
                                            React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Job Type *'),
                                            React.createElement('select', { 
                                                value: newJobData.type,
                                                onChange: (e) => setNewJobData({...newJobData, type: e.target.value}),
                                                className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500',
                                                required: true
                                            },
                                                ['Full-Time', 'Part-Time', 'Contract', 'Remote'].map(type => 
                                                    React.createElement('option', { key: type, value: type }, type)
                                                )
                                            )
                                        )
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Category *'),
                                        React.createElement('select', { 
                                            value: newJobData.category,
                                            onChange: (e) => setNewJobData({...newJobData, category: e.target.value}),
                                            className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500',
                                            required: true
                                        },
                                            CATEGORIES.map(cat => React.createElement('option', { key: cat, value: cat }, cat))
                                        )
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Location *'),
                                        React.createElement('input', { 
                                            type: 'text',
                                            value: newJobData.location,
                                            onChange: (e) => setNewJobData({...newJobData, location: e.target.value}),
                                            className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500',
                                            placeholder: 'e.g., New York, NY or Remote',
                                            required: true
                                        })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Job Description *'),
                                        React.createElement('textarea', { 
                                            value: newJobData.description,
                                            onChange: (e) => setNewJobData({...newJobData, description: e.target.value}),
                                            className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500',
                                            rows: 6,
                                            placeholder: 'Describe the role, responsibilities, and requirements...',
                                            required: true
                                        })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Application Link *'),
                                        React.createElement('input', { 
                                            type: 'url',
                                            value: newJobData.link,
                                            onChange: (e) => setNewJobData({...newJobData, link: e.target.value}),
                                            className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500',
                                            placeholder: 'https://yourcompany.com/careers/job-id',
                                            required: true
                                        })
                                    ),
                                    React.createElement('div', { className: 'flex gap-4' },
                                        React.createElement('button', { 
                                            type: 'submit',
                                            className: 'flex-1 bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 font-medium'
                                        }, 'Post Featured Job'),
                                        React.createElement('button', { 
                                            type: 'button',
                                            onClick: () => setShowJobForm(false),
                                            className: 'px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50'
                                        }, 'Cancel')
                                    )
                                )
                            )
                        );
                    }
                    
                    // Regular dashboard view WITH ANALYTICS
                    return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100' },
                        React.createElement('header', { className: 'bg-white shadow-sm border-b' },
                            React.createElement('div', { className: 'max-w-7xl mx-auto px-4 py-4 flex justify-between items-center' },
                                React.createElement('h1', { className: 'text-xl font-bold' }, 'üëî Employer Dashboard'),
                                React.createElement('div', { className: 'flex gap-4' },
                                    React.createElement('button', { 
                                        onClick: () => setShowDashboard(false),
                                        className: 'text-gray-600 hover:text-gray-900'
                                    }, 'View Job Board'),
                                    React.createElement('button', { 
                                        onClick: handleLogout,
                                        className: 'text-red-600 hover:text-red-700'
                                    }, 'Log Out')
                                )
                            )
                        ),
                        React.createElement('div', { className: 'max-w-7xl mx-auto px-4 py-8' },
                            // Welcome Section
                            React.createElement('div', { className: 'bg-white rounded-lg shadow p-6 mb-6' },
                                React.createElement('h2', { className: 'text-2xl font-bold mb-2' }, `Welcome back, ${employerFirstName}!`),
                                React.createElement('p', { className: 'text-gray-600 mb-4' }, 'Manage your job listings and track their performance'),
                                React.createElement('button', { 
                                    onClick: handlePostNewJob,
                                    className: 'bg-yellow-500 text-white px-6 py-3 rounded-lg hover:bg-yellow-600 font-medium'
                                }, '‚≠ê Post a Featured Job - $99')
                            ),
                            
                            // Analytics Overview Cards
                            employerJobs.length > 0 && React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-6 mb-6' },
                                React.createElement('div', { className: 'bg-white rounded-lg shadow p-6' },
                                    React.createElement('div', { className: 'flex items-center justify-between mb-2' },
                                        React.createElement('span', { className: 'text-gray-600 text-sm font-medium' }, 'Total Views'),
                                        React.createElement('span', { className: 'text-2xl' }, 'üëÅÔ∏è')
                                    ),
                                    React.createElement('p', { className: 'text-3xl font-bold text-indigo-600' }, totalViews.toLocaleString()),
                                    React.createElement('p', { className: 'text-xs text-gray-500 mt-1' }, 'Across all your listings')
                                ),
                                React.createElement('div', { className: 'bg-white rounded-lg shadow p-6' },
                                    React.createElement('div', { className: 'flex items-center justify-between mb-2' },
                                        React.createElement('span', { className: 'text-gray-600 text-sm font-medium' }, 'Total Clicks'),
                                        React.createElement('span', { className: 'text-2xl' }, 'üñ±Ô∏è')
                                    ),
                                    React.createElement('p', { className: 'text-3xl font-bold text-green-600' }, totalClicks.toLocaleString()),
                                    React.createElement('p', { className: 'text-xs text-gray-500 mt-1' }, 'Apply Now button clicks')
                                ),
                                React.createElement('div', { className: 'bg-white rounded-lg shadow p-6' },
                                    React.createElement('div', { className: 'flex items-center justify-between mb-2' },
                                        React.createElement('span', { className: 'text-gray-600 text-sm font-medium' }, 'Avg Click Rate'),
                                        React.createElement('span', { className: 'text-2xl' }, 'üìà')
                                    ),
                                    React.createElement('p', { className: 'text-3xl font-bold text-purple-600' }, `${avgCTR}%`),
                                    React.createElement('p', { className: 'text-xs text-gray-500 mt-1' }, 
                                        avgCTR >= 5 ? 'Great performance! üéâ' : 'Room for improvement'
                                    )
                                )
                            ),
                            
                            // Your Job Listings Section
                            React.createElement('div', { className: 'bg-white rounded-lg shadow p-6' },
                                React.createElement('h3', { className: 'text-xl font-bold mb-4' }, 'Your Job Listings'),
                                employerJobs.length === 0 ? 
                                    React.createElement('div', { className: 'text-center py-12 text-gray-500' },
                                        React.createElement('p', { className: 'mb-2' }, `No job listings found for ${employerCompany}.`),
                                        React.createElement('p', { className: 'text-sm' }, 'Click "Post a Featured Job" above to add your first listing!')
                                    ) :
                                    React.createElement('div', { className: 'space-y-4' },
                                        employerJobs.map((job, index) => {
                                            const daysRemaining = calculateDaysRemaining(job.featuredExpiryDate);
                                            const jobCTR = calculateCTR(job.totalClicks || 0, job.totalViews || 0);
                                            const isActive = job.status === 'active' || !job.status;
                                            
                                            return React.createElement('div', { 
                                                key: job.id || index,
                                                className: `border rounded-lg p-6 ${!isActive ? 'opacity-60 bg-gray-50' : ''}`
                                            },
                                                // Job Header
                                                React.createElement('div', { className: 'flex justify-between items-start mb-4' },
                                                    React.createElement('div', { className: 'flex-1' },
                                                        React.createElement('h4', { className: 'font-bold text-lg mb-1' }, job.title),
                                                        React.createElement('div', { className: 'flex items-center gap-3 text-sm text-gray-600' },
                                                            job.isFeatured && React.createElement('span', { className: 'text-yellow-600 font-medium' }, '‚≠ê Featured'),
                                                            React.createElement('span', null, job.level),
                                                            React.createElement('span', null, '‚Ä¢'),
                                                            React.createElement('span', null, job.location),
                                                            !isActive && React.createElement('span', { className: 'text-red-600 font-medium' }, '‚Ä¢ Paused')
                                                        ),
                                                        job.isFeatured && daysRemaining !== null && React.createElement('p', { className: 'text-xs text-gray-500 mt-1' },
                                                            daysRemaining > 0 ? 
                                                                `${daysRemaining} days remaining in featured period` :
                                                                'Featured period expired'
                                                        )
                                                    ),
                                                    React.createElement('div', { className: 'text-right' },
                                                        React.createElement('span', { 
                                                            className: `inline-block px-3 py-1 rounded-full text-xs font-medium ${
                                                                jobCTR >= 5 ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'
                                                            }`
                                                        }, `${jobCTR}% CTR`)
                                                    )
                                                ),
                                                
                                                // Analytics Stats
                                                React.createElement('div', { className: 'grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 p-4 bg-gray-50 rounded-lg' },
                                                    React.createElement('div', null,
                                                        React.createElement('p', { className: 'text-xs text-gray-600 mb-1' }, 'Views'),
                                                        React.createElement('p', { className: 'text-xl font-bold text-indigo-600' }, (job.totalViews || 0).toLocaleString())
                                                    ),
                                                    React.createElement('div', null,
                                                        React.createElement('p', { className: 'text-xs text-gray-600 mb-1' }, 'Clicks'),
                                                        React.createElement('p', { className: 'text-xl font-bold text-green-600' }, (job.totalClicks || 0).toLocaleString())
                                                    ),
                                                    React.createElement('div', null,
                                                        React.createElement('p', { className: 'text-xs text-gray-600 mb-1' }, 'Cost/View'),
                                                        React.createElement('p', { className: 'text-xl font-bold text-purple-600' }, 
                                                            job.totalViews > 0 ? `$${(99 / job.totalViews).toFixed(2)}` : '$0.00'
                                                        )
                                                    ),
                                                    React.createElement('div', null,
                                                        React.createElement('p', { className: 'text-xs text-gray-600 mb-1' }, 'Cost/Click'),
                                                        React.createElement('p', { className: 'text-xl font-bold text-orange-600' }, 
                                                            job.totalClicks > 0 ? `$${(99 / job.totalClicks).toFixed(2)}` : '$0.00'
                                                        )
                                                    )
                                                ),
                                                
                                                // Action Buttons
                                                React.createElement('div', { className: 'flex flex-wrap gap-3' },
                                                    React.createElement('a', {
                                                        href: job.link,
                                                        target: '_blank',
                                                        className: 'text-sm text-indigo-600 hover:text-indigo-700 font-medium'
                                                    }, 'View Listing ‚Üí'),
                                                    
                                                    !job.isFeatured && React.createElement('button', { 
                                                        className: 'text-sm bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 transition-colors',
                                                        onClick: () => handlePromoteJob(job)
                                                    }, '‚≠ê Promote to Featured - $99'),
                                                    
                                                    job.isFeatured && daysRemaining !== null && daysRemaining < 7 && React.createElement('button', { 
                                                        className: 'text-sm bg-indigo-500 text-white px-4 py-2 rounded hover:bg-indigo-600 transition-colors',
                                                        onClick: () => handlePromoteJob(job)
                                                    }, 'üîÑ Extend Featured - $99')
                                                )
                                            );
                                        })
                                    )
                            )
                        )
                    );
                }
                
                // Employer Login/Signup page
                if (showEmployerLogin) {
                    return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4' },
                        React.createElement('div', { className: 'max-w-md w-full' },
                            React.createElement('div', { className: 'text-center mb-8' },
                                React.createElement('button', { 
                                    onClick: () => setShowEmployerLogin(false),
                                    className: 'text-indigo-600 hover:text-indigo-700 mb-4 inline-block'
                                }, '‚Üê Back to Jobs'),
                                React.createElement('h1', { className: 'text-2xl font-bold text-gray-900 mb-2' }, 'Partnerships Careers'),
                                React.createElement('p', { className: 'text-gray-600' }, 'Employer Portal')
                            ),
                            React.createElement('div', { className: 'bg-white rounded-lg shadow-lg p-8' },
                                React.createElement('h2', { className: 'text-2xl font-bold text-gray-900 mb-6' }, isSignUp ? 'Create Employer Account' : 'Employer Login'),
                                React.createElement('form', { 
                                    className: 'space-y-4 mb-6', 
                                    onSubmit: async (e) => {
                                        e.preventDefault();
                                        const formData = new FormData(e.target);
                                        const emailInput = formData.get('email');
                                        const password = formData.get('password');
                                        const confirmPassword = formData.get('confirmPassword');
                                        const company = formData.get('company');
                                        const firstName = formData.get('firstName');
                                        
                                        if (isSignUp) {
                                            if (!firstName || firstName.trim() === '') {
                                                alert('Please enter your first name');
                                                return;
                                            }
                                            if (password.length < 8) {
                                                alert('Password must be at least 8 characters long');
                                                return;
                                            }
                                            if (password !== confirmPassword) {
                                                alert('Passwords do not match');
                                                return;
                                            }
                                            if (!company || company.trim() === '') {
                                                alert('Please enter your company name');
                                                return;
                                            }
                                            await handleSignUp(emailInput, password, firstName, company);
                                        } else {
                                            await handleLogin(emailInput, password);
                                        }
                                    }
                                },
                                    isSignUp && React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'First Name'),
                                        React.createElement('input', { 
                                            type: 'text',
                                            name: 'firstName',
                                            className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500',
                                            placeholder: 'John',
                                            required: true
                                        })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Email Address'),
                                        React.createElement('input', { 
                                            type: 'email',
                                            name: 'email',
                                            className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500',
                                            placeholder: 'you@company.com',
                                            required: true
                                        })
                                    ),
                                    isSignUp && React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Company Name'),
                                        React.createElement('input', { 
                                            type: 'text',
                                            name: 'company',
                                            className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500',
                                            placeholder: 'Your Company',
                                            required: true
                                        })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 
                                            'Password',
                                            isSignUp && React.createElement('span', { className: 'text-xs text-gray-500 ml-2' }, '(min. 8 characters)')
                                        ),
                                        React.createElement('input', { 
                                            type: 'password',
                                            name: 'password',
                                            minLength: isSignUp ? 8 : undefined,
                                            className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500',
                                            placeholder: '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢',
                                            required: true
                                        })
                                    ),
                                    isSignUp && React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Confirm Password'),
                                        React.createElement('input', { 
                                            type: 'password',
                                            name: 'confirmPassword',
                                            minLength: 8,
                                            className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500',
                                            placeholder: '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢',
                                            required: true
                                        })
                                    ),
                                    React.createElement('button', { 
                                        type: 'submit',
                                        className: 'w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 font-medium'
                                    }, isSignUp ? 'Sign Up' : 'Log In')
                                ),
                                React.createElement('div', { className: 'relative mb-6' },
                                    React.createElement('div', { className: 'absolute inset-0 flex items-center' },
                                        React.createElement('div', { className: 'w-full border-t border-gray-300' })
                                    ),
                                    React.createElement('div', { className: 'relative flex justify-center text-sm' },
                                        React.createElement('span', { className: 'px-2 bg-white text-gray-500' }, 'Or continue with')
                                    )
                                ),
                                React.createElement('button', { 
                                    onClick: handleGoogleSignIn,
                                    type: 'button',
                                    className: 'w-full bg-white border border-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-50 font-medium flex items-center justify-center gap-2'
                                },
                                    React.createElement('svg', { className: 'w-5 h-5', viewBox: '0 0 24 24' },
                                        React.createElement('path', { fill: '#4285F4', d: 'M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z' }),
                                        React.createElement('path', { fill: '#34A853', d: 'M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z' }),
                                        React.createElement('path', { fill: '#FBBC05', d: 'M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z' }),
                                        React.createElement('path', { fill: '#EA4335', d: 'M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z' })
                                    ),
                                    'Sign in with Google'
                                ),
                                React.createElement('div', { className: 'mt-6 text-center text-sm' },
                                    React.createElement('button', { 
                                        onClick: () => setIsSignUp(!isSignUp),
                                        type: 'button',
                                        className: 'text-indigo-600 hover:text-indigo-700 font-medium'
                                    }, isSignUp ? 'Already have an account? Log in' : "Don't have an account? Sign up")
                                )
                            )
                        )
                    );
                }

                // Main job board
                return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100' },
                    React.createElement('header', { className: 'bg-white shadow-sm border-b' },
                        React.createElement('div', { className: 'max-w-7xl mx-auto px-4 py-4' },
                            React.createElement('div', { className: 'flex justify-between items-center' },
                                React.createElement('div', null,
                                    React.createElement('div', { className: 'text-xl font-bold' }, 'Partnerships Careers'),
                                    React.createElement('div', { className: 'text-xs text-gray-500' }, 'partnerships-careers.com')
                                ),
                                isEmployerLoggedIn ? 
                                    React.createElement('div', { className: 'flex gap-4 items-center' },
                                        React.createElement('span', { className: 'text-sm text-gray-600' }, `Hi, ${employerFirstName}!`),
                                        React.createElement('button', { 
                                            onClick: () => setShowDashboard(true),
                                            className: 'bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700'
                                        }, 'Dashboard'),
                                        React.createElement('button', { 
                                            onClick: handleLogout,
                                            className: 'text-gray-600 hover:text-gray-900'
                                        }, 'Log Out')
                                    )
                                    :
                                    React.createElement('button', { 
                                        onClick: () => setShowEmployerLogin(true),
                                        className: 'bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700'
                                    }, 'Employer Login')
                            )
                        )
                    ),
                    React.createElement('div', { className: 'bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-16' },
                        React.createElement('div', { className: 'max-w-7xl mx-auto px-4' },
                            React.createElement('h1', { className: 'text-5xl font-bold mb-4' }, 'Your Career in Partnerships Starts Here'),
                            React.createElement('p', { className: 'text-xl mb-6' }, 'Connect with top companies hiring for partnership roles.'),
                            React.createElement('div', { className: 'bg-white/10 rounded-lg p-6 mb-6 max-w-2xl' },
                                React.createElement('h3', { className: 'font-bold mb-3' }, 'üìß Get Job Alerts'),
                                React.createElement('div', { className: 'flex gap-2' },
                                    React.createElement('input', {
                                        type: 'email',
                                        value: email,
                                        onChange: (e) => setEmail(e.target.value),
                                        placeholder: 'Enter your email',
                                        className: 'flex-1 px-4 py-3 rounded-lg text-gray-900'
                                    }),
                                    React.createElement('button', {
                                        onClick: () => {
                                            if (email) {
                                                alert('Thanks! We\'ll send alerts to ' + email);
                                                setEmail('');
                                            }
                                        },
                                        className: 'bg-yellow-500 text-white px-6 py-3 rounded-lg hover:bg-yellow-600'
                                    }, 'Sign Up')
                                )
                            ),
                            React.createElement('div', { className: 'flex gap-4' },
                                React.createElement('div', { className: 'bg-white/10 px-4 py-2 rounded-lg' },
                                    React.createElement('div', { className: 'text-2xl font-bold' }, jobs.length),
                                    React.createElement('div', null, 'Active Jobs')
                                ),
                                React.createElement('div', { className: 'bg-white/10 px-4 py-2 rounded-lg' },
                                    React.createElement('div', { className: 'text-2xl font-bold' }, new Set(jobs.map(j => j.company)).size),
                                    React.createElement('div', null, 'Companies')
                                )
                            )
                        )
                    ),
                    React.createElement('div', { className: 'max-w-7xl mx-auto px-4 py-8' },
                        React.createElement('div', { className: 'bg-white rounded-lg shadow p-6 mb-8' },
                            React.createElement('div', { className: 'flex justify-between mb-6' },
                                React.createElement('h3', { className: 'font-bold' }, 'Filter Jobs'),
                                React.createElement('button', { onClick: fetchJobs, className: 'text-indigo-600' }, 'üîÑ Refresh')
                            ),
                            React.createElement('div', { className: 'mb-6' },
                                React.createElement('h3', { className: 'text-sm font-bold mb-3' }, 'FILTER BY ROLE LEVEL'),
                                React.createElement('div', { className: 'flex flex-wrap gap-3' },
                                    React.createElement('button', {
                                        onClick: () => setSelectedLevel('All'),
                                        className: selectedLevel === 'All' ? 'px-5 py-2 rounded-full bg-indigo-600 text-white' : 'px-5 py-2 rounded-full bg-gray-100'
                                    }, 'All Levels'),
                                    ...LEVELS.map(level => 
                                        React.createElement('button', {
                                            key: level,
                                            onClick: () => setSelectedLevel(level),
                                            className: selectedLevel === level ? 'px-5 py-2 rounded-full bg-indigo-600 text-white' : 'px-5 py-2 rounded-full bg-gray-100'
                                        }, level)
                                    )
                                )
                            ),
                            React.createElement('div', null,
                                React.createElement('h3', { className: 'text-sm font-medium mb-3' }, 'FILTER BY PARTNERSHIP TYPE'),
                                React.createElement('div', { className: 'flex flex-wrap gap-3' },
                                    React.createElement('button', {
                                        onClick: () => setSelectedCategory('All'),
                                        className: selectedCategory === 'All' ? 'px-5 py-2 rounded-full bg-indigo-600 text-white' : 'px-5 py-2 rounded-full bg-gray-100'
                                    }, 'All Categories'),
                                    ...CATEGORIES.map(cat => 
                                        React.createElement('button', {
                                            key: cat,
                                            onClick: () => setSelectedCategory(cat),
                                            className: selectedCategory === cat ? 'px-5 py-2 rounded-full bg-indigo-600 text-white' : 'px-5 py-2 rounded-full bg-gray-100'
                                        }, cat)
                                    )
                                )
                            )
                        ),
                        loading && React.createElement('div', { className: 'bg-white rounded-lg shadow p-6 text-center text-gray-500' }, 
                            React.createElement('div', { className: 'flex items-center justify-center gap-2' },
                                React.createElement('div', { className: 'w-4 h-4 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin' }),
                                React.createElement('span', null, 'Loading jobs...')
                            )
                        ),
                        error && React.createElement('div', { className: 'bg-red-50 border border-red-200 p-4 rounded mb-4 text-sm text-red-700' }, error),
                        (jobs.length > 0 || !loading) && React.createElement('div', null,
                            featuredJobs.length > 0 && React.createElement('div', { className: 'mb-8' },
                                React.createElement('h2', { className: 'text-2xl font-bold mb-4' }, '‚≠ê Featured Jobs'),
                                featuredJobs.map((job, index) => 
                                    React.createElement('div', { key: job.id || index, className: 'bg-white rounded-lg shadow p-6 mb-4 border-2 border-yellow-400' },
                                        React.createElement('div', { className: 'flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3 mb-4' },
                                            React.createElement('div', { className: 'flex-1' },
                                                React.createElement('h3', { className: 'text-xl font-bold' }, job.title),
                                                React.createElement('p', { className: 'text-lg' }, job.company)
                                            ),
                                            React.createElement('span', { className: 'bg-indigo-100 px-3 py-1 rounded-full text-sm whitespace-nowrap self-start' }, job.level)
                                        ),
                                        React.createElement('p', { className: 'mb-4' }, job.description),
                                        React.createElement('div', { className: 'flex gap-3 text-sm mb-4' },
                                            React.createElement('span', null, 'üìç ' + job.location),
                                            job.type && React.createElement('span', null, 'üíº ' + job.type)
                                        ),
                                        React.createElement('button', { 
                                            onClick: () => trackJobClick(job.id, job.link),
                                            className: 'bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 cursor-pointer'
                                        }, 'Apply Now')
                                    )
                                )
                            ),
                            regularJobs.length > 0 && React.createElement('div', null,
                                React.createElement('h2', { className: 'text-2xl font-bold mb-4' }, 'All Jobs'),
                                regularJobs.map((job, index) => 
                                    React.createElement('div', { key: job.id || index, className: 'bg-white rounded-lg shadow p-6 mb-4' },
                                        React.createElement('div', { className: 'flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3 mb-4' },
                                            React.createElement('div', { className: 'flex-1' },
                                                React.createElement('h3', { className: 'text-xl font-bold' }, job.title),
                                                React.createElement('p', { className: 'text-lg' }, job.company)
                                            ),
                                            React.createElement('span', { className: 'bg-indigo-100 px-3 py-1 rounded-full text-sm whitespace-nowrap self-start' }, job.level)
                                        ),
                                        React.createElement('p', { className: 'mb-4' }, job.description),
                                        React.createElement('div', { className: 'flex gap-3 text-sm mb-4' },
                                            React.createElement('span', null, 'üìç ' + job.location),
                                            job.type && React.createElement('span', null, 'üíº ' + job.type)
                                        ),
                                        React.createElement('button', { 
                                            onClick: () => trackJobClick(job.id, job.link),
                                            className: 'bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 cursor-pointer'
                                        }, 'Apply Now')
                                    )
                                )
                            ),
                            jobs.length === 0 && !loading && React.createElement('div', { className: 'bg-white rounded-lg shadow p-12 text-center text-gray-500' },
                                React.createElement('p', { className: 'text-lg mb-2' }, 'üîç No jobs available yet'),
                                React.createElement('p', { className: 'text-sm' }, 'Check back soon for new opportunities!')
                            )
                        )
                    )
                );
            }

            const root = createRoot(document.getElementById('root'));
            root.render(React.createElement(App));
            console.log('React app rendered successfully!');
        }
        
        // Start initialization
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initApp);
        } else {
            initApp();
        }
    </script>
</body>
</html>
